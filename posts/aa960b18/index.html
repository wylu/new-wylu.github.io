<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="vcq5WrhCWyd46wcP2vlKwdhtxGNTabq1LhLXYV8pDOY">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://wylu.me').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: {"enable":true,"caption":false},
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: 'QPQVX9MYX9',
      apiKey: '9f2738c0cc6f107c67eba29565c2d007',
      indexName: 'dev_PASSAGE',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

<script data-ad-client="ca-pub-5699403938610067" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <meta name="description" content="本文将介绍一些第三方服务的集成与使用，如评论、搜索、SEO、持续集成等。">
<meta name="keywords" content="Hexo,NexT">
<meta property="og:type" content="article">
<meta property="og:title" content="NexT第三方服务集成">
<meta property="og:url" content="https://wylu.me/posts/aa960b18/index.html">
<meta property="og:site_name" content="wylu">
<meta property="og:description" content="本文将介绍一些第三方服务的集成与使用，如评论、搜索、SEO、持续集成等。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/github-oauth-app.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/client-id-secret.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/login-to-initialize.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/comments.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/issues.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/menu-guestbook.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/guestbook-page.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/busuanzi-count.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/busuanzi-post-views.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/menu-localsearch.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/localsearch.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-login.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-about-you.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-datacenter.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-dashboard.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-tutorial.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-create-index-1.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-create-index-2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-index-name.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-search-only-key.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-edit-search-key.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-select-index.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-api-key.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-key-indices.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-key-acl.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-keys.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/export-key.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-search.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-add-site-1.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-add-site-2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-site-url.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-site-verify.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-verify-html-tag.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-index-html-tag.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-finish-site-verify.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-submit-sitemap.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-submit-sitemap-success.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-setting.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-select-repo.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-repo-settings.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/personal-access-token.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-env-var.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-passed.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-log.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-push-fail.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-push-success.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-history.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-dev.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-passing.png">
<meta property="og:updated_time" content="2020-01-12T09:44:48.653Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NexT第三方服务集成">
<meta name="twitter:description" content="本文将介绍一些第三方服务的集成与使用，如评论、搜索、SEO、持续集成等。">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/github-oauth-app.png">

<link rel="canonical" href="https://wylu.me/posts/aa960b18/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>NexT第三方服务集成 | wylu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wylu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Keep It Simple, Stupid</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">47</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">27</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">66</span></a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook/" rel="section"><i class="fa fa-fw fa-commenting"></i>留言板</a>

  </li>
        <li class="menu-item menu-item-sitelog">

    <a href="/sitelog/" rel="section"><i class="fa fa-fw fa-list-alt"></i>站点日志</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input" id="search-input"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

  
</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/wylu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wylu.me/posts/aa960b18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lu wenye">
      <meta itemprop="description" content="Hard work, Dedication and Discipline">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wylu">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          NexT第三方服务集成
        </h1>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-05-07 23:45:25" itemprop="dateCreated datePublished" datetime="2019-05-07T23:45:25+08:00">2019-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-12 17:44:48" itemprop="dateModified" datetime="2020-01-12T17:44:48+08:00">2020-01-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tool/" itemprop="url" rel="index">
                    <span itemprop="name">Tool</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tool/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本文将介绍一些第三方服务的集成与使用，如评论、搜索、SEO、持续集成等。</p>
<a id="more"></a>
<h1 id="环境及版本声明">环境及版本声明</h1>
<p>本文基于以下环境及版本：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hexo:</span> <span class="number">3.8</span><span class="number">.0</span></span><br><span class="line"><span class="attr">hexo-cli:</span> <span class="number">1.1</span><span class="number">.0</span></span><br><span class="line"><span class="attr">NexT:</span> <span class="number">7.1</span><span class="number">.0</span></span><br><span class="line"><span class="attr">OS:</span> <span class="string">Ubuntu</span> <span class="number">18.04</span> <span class="string">LTS</span> <span class="string">x86_64</span></span><br></pre></td></tr></table></figure>
<p><strong>若主题版本不一致，下面的配置方法可能不适用。</strong></p>
<h1 id="集成-gitalk-评论系统">集成 Gitalk 评论系统</h1>
<p>参考</p>
<ul>
<li><p>zhujian hexo指南 <a href="https://hexo-guide.readthedocs.io/zh_CN/latest/third-service/%5BGitalk%5D%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F.html" rel="external nofollow noopener noreferrer" target="_blank">Gitalk评论系统</a></p></li>
<li><p><a href="https://theme-next.org/docs/third-party-services/comments-and-widgets#Gitalk" rel="external nofollow noopener noreferrer" target="_blank">https://theme-next.org/docs/third-party-services/comments-and-widgets#Gitalk</a></p></li>
<li><p>asdfv1929 博客 <a href="https://asdfv1929.github.io/2018/01/20/gitalk/" rel="external nofollow noopener noreferrer" target="_blank">Hexo NexT主题中集成gitalk评论系统</a></p></li>
</ul>
<p>Gitalk是一个基于 GitHub Issue 和 Preact 的现代评论组件。详见 <a href="https://github.com/gitalk/gitalk" rel="external nofollow noopener noreferrer" target="_blank">官方Github</a> 和 <a href="https://gitalk.github.io/" rel="external nofollow noopener noreferrer" target="_blank">官方Demo</a>。</p>
<p>实际上现在 NexT 已经集成了 gitalk，我们只需做一些配置即可，配置步骤如下。</p>
<h2 id="注册-oauth-app">注册 OAuth App</h2>
<p>进入 github 注册页面 <a href="https://github.com/settings/applications/new" rel="external nofollow noopener noreferrer" target="_blank">Register a new OAuth application</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/github-oauth-app.png" alt="github-oauth-app"></p>
<p>Application name： 应用名称，随意 Homepage URL： 使用 gitalk 的网站地址，如果为 GithubPage，则为 https://yourname.github.io Application description 应用描述，随意 Authorization callback URL： 使用 gitalk 的网站地址（授权回调 URL），如果为 GithubPage，则为 https://yourname.github.io</p>
<p>注册成功后，页面跳转，生成 <code>Client ID</code> 和 <code>Client Secret</code> 在后面的配置会用到。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/client-id-secret.png" alt="client-id-secret"></p>
<h2 id="修改主题-_config.yml-配置">修改主题 <code>_config.yml</code> 配置</h2>
<p>编辑 <code>主题配置文件</code>，启用 <code>gitalk</code> 模块，修改配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gitalk</span></span><br><span class="line"><span class="comment"># Demo: https://gitalk.github.io</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  github_id:</span> <span class="string">wylu</span> <span class="comment"># github账号 Github repo owner</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">github-pages-comments</span> <span class="comment"># 保存评论的仓库 Repository name to store issues</span></span><br><span class="line"><span class="attr">  client_id:</span> <span class="string">填写刚刚注册生成的</span> <span class="string">Client</span> <span class="string">ID</span> <span class="comment"># Github Application Client ID</span></span><br><span class="line"><span class="attr">  client_secret:</span> <span class="string">填写刚刚注册生成的</span> <span class="string">Client</span> <span class="string">Secret</span> <span class="comment"># Github Application Client Secret</span></span><br><span class="line"><span class="attr">  admin_user:</span> <span class="string">wylu</span> <span class="comment"># GitHub repo owner and collaborators, only these guys can initialize github issues</span></span><br><span class="line"><span class="attr">  distraction_free_mode:</span> <span class="literal">true</span> <span class="comment"># Facebook-like distraction free mode</span></span><br><span class="line">  <span class="comment"># Gitalk's display language depends on user's browser or system environment</span></span><br><span class="line">  <span class="comment"># If you want everyone visiting your site to see a uniform language, you can set a force language value</span></span><br><span class="line">  <span class="comment"># Available values: en, es-ES, fr, ru, zh-CN, zh-TW</span></span><br><span class="line"><span class="attr">  language:</span></span><br></pre></td></tr></table></figure>
<p>gitalk 实际上是利用提 Issues 的方式来存储评论的，所以需要使用 <code>repo</code> 指定一个仓库来存储 Issues，<strong>建议新建一个仓库专门用来存储 GithubPages 的评论</strong>，如这里我使用了仓库 <code>github-pages-comments</code> 来存储评论，而不是使用部署 GithubPages 的仓库。</p>
<h2 id="初始化评论">初始化评论</h2>
<p>部署成功后，打开一篇文章，登录 github 就会初始化文章评论。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/login-to-initialize.png" alt="login-to-initialize"></p>
<p>登录成功后</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/comments.png" alt="comments"></p>
<p>自动创建的 Issues</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/issues.png" alt="issues"></p>
<p><strong>注意：所有没有初始化过的评论的文章都需要进入到该文章页面下才会初始该文章对应的评论（Issues）。</strong></p>
<p><strong>另外，如果文章的链接变了，文章会重新初始化评论，即创建新的 Issues 并指向它。猜测 gitalk 可能是根据文章链接来创建 Issues 的，每一个链接对应一个页面，每一个页面对应一个 Issues 。所以推荐使用 <a href="https://wylu.github.io/posts/78c745f0/" target="_blank" rel="noopener">abbrlink</a> 设置永久链接，以避免同一篇文章重复创建 Issues 。</strong></p>
<h2 id="取消一些页面的评论">取消一些页面的评论</h2>
<p>成功配置 gitalk 评论系统后，将会在每个页面末尾添加评论框，对于不需要评论的文章或页面，可在 front-matter 设置如下属性进行隐藏：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h1 id="创建留言板">创建留言板</h1>
<p>成功配置 gitalk 评论功能后，我们就可以利用它来实现留言板的功能了。</p>
<h2 id="新建-guestbook-页面">新建 guestbook 页面</h2>
<p>与添加标签页、分类页类似，留言板的 layout 也是 page，在站点根目录下执行下列命令创建一个新页面：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page guestbook</span><br></pre></td></tr></table></figure>
<h2 id="添加菜单项">添加菜单项</h2>
<p>编辑 <code>主题配置文件</code>，在 <code>menu</code> 下添加 <code>guestbook: /guestbook/ || commenting</code>，如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash from link value (/archives -&gt; archives).</span></span><br><span class="line"><span class="comment"># Usage: `Key: /link/ || icon`</span></span><br><span class="line"><span class="comment"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span></span><br><span class="line"><span class="comment"># Value before `||` delimeter is the target link.</span></span><br><span class="line"><span class="comment"># Value after `||` delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, question icon will be loaded.</span></span><br><span class="line"><span class="comment"># External url should start with http:// or https://</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line"><span class="attr">  home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line"><span class="attr">  about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line"><span class="attr">  tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">  categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line"><span class="attr">  archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line"><span class="attr">  guestbook:</span> <span class="string">/guestbook/</span> <span class="string">||</span> <span class="string">commenting</span></span><br></pre></td></tr></table></figure>
<h2 id="设置菜单项显示文本">设置菜单项显示文本</h2>
<p>如果存在该菜单项对应的翻译，则将加载翻译的文本，否则将直接使用 key 的值，这里的 key 就是冒号前面的 <code>guestbook</code>。</p>
<p>假设我们现在站点用的语言是 <code>zh-CN</code>，则编辑 <code>themes/next/languages/zh-CN.yml</code> 文件，在 <code>menu</code> 下添加 <code>guestbook: 留言板</code>，如：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line"><span class="attr">  home:</span> <span class="string">(^_^)</span> <span class="comment"># 首页</span></span><br><span class="line"><span class="attr">  archives:</span> <span class="string">归档</span></span><br><span class="line"><span class="attr">  categories:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">  tags:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">  about:</span> <span class="string">关于</span></span><br><span class="line"><span class="attr">  guestbook:</span> <span class="string">留言板</span></span><br></pre></td></tr></table></figure>
<p>设置完成后，效果如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/menu-guestbook.png" alt="menu-guestbook"></p>
<p>打开页面如下（部署成功后，登录就可以评论留言了）：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/guestbook-page.png" alt="guestbook-page"></p>
<h1 id="不蒜子访客数和访问量统计">不蒜子访客数和访问量统计</h1>
<p>统计项包括：</p>
<ul>
<li>站点总访客数</li>
<li>站点总访问量</li>
<li>文章总阅读数</li>
</ul>
<p>NexT 已经集成了 busuanzi 统计服务。更多关于 busuanzi 的介绍请移步 <a href="http://ibruce.info/2015/04/04/busuanzi/" rel="external nofollow noopener noreferrer" target="_blank">http://ibruce.info/2015/04/04/busuanzi/</a></p>
<p>编辑 <code>主题配置文件</code>，启用 <code>busuanzi_count</code> 统计模块，修改配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  total_visitors:</span> <span class="literal">true</span> <span class="comment"># 是否展示站点总访客数</span></span><br><span class="line"><span class="attr">  total_visitors_icon:</span> <span class="string">user</span> <span class="comment"># 对应 font awesome 图标名称，如果没有定义则不显示图标</span></span><br><span class="line"><span class="attr">  total_views:</span> <span class="literal">true</span> <span class="comment"># 是否展示站点总访问量</span></span><br><span class="line"><span class="attr">  total_views_icon:</span> <span class="string">eye</span> <span class="comment"># 对应 font awesome 图标名称</span></span><br><span class="line"><span class="attr">  post_views:</span> <span class="literal">true</span> <span class="comment"># 是否展示文章总访问量</span></span><br><span class="line"><span class="attr">  post_views_icon:</span> <span class="string">eye</span> <span class="comment"># 对应 font awesome 图标名称</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/busuanzi-count.png" alt="busuanzi-count"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/busuanzi-post-views.png" alt="busuanzi-post-views"></p>
<p><strong>注意：通过查看 <code>themes/next/layout/_third-party/analytics/busuanzi-counter.swig</code> 中的代码，可以发现 <code>total_visitors</code> 使用的是 <code>uv</code> 的计算方式，即单个用户连续点击n篇文章，只记录 1 次访客数； <code>total_views</code> 使用的是 <code>pv</code> 的计算方式，单个用户点击 1 篇文章，本篇文章记录 1 次阅读量。查看 <code>themes/next/layout/_macro/post.swig</code> 中的代码，可知 <code>post_views</code> 使用的是 <code>pv</code> 计算方式。</strong></p>
<p><strong>另外一个需要注意的是，在本地预览时会看到的统计结果数异常，不用理会，只要部署到 GithubPages 后就会正常统计。启用 不蒜子 后，就算设置不显示统计结果，统计任务也一样会继续运行。</strong></p>
<h1 id="使用-localsearch-搜索功能">使用 LocalSearch 搜索功能</h1>
<p><strong>NexT 支持许多搜索服务，只需选择其中一种即可。</strong></p>
<p>参考 yashuning 博客 <a href="https://yashuning.github.io/2018/06/29/hexo-Next-%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/" rel="external nofollow noopener noreferrer" target="_blank">hexo - Next 主题添加搜索功能</a></p>
<h2 id="安装插件">安装插件</h2>
<p><code>local_search</code> 依赖于插件 <a href="https://github.com/theme-next/hexo-generator-searchdb" rel="external nofollow noopener noreferrer" target="_blank">hexo-generator-searchdb</a></p>
<p>在站点根目录下执行下列安装命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<h2 id="编辑-站点配置文件-_config.yml">编辑 <code>站点配置文件</code> _config.yml</h2>
<p>在文件末尾添加如下默认配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">search.xml</span></span><br><span class="line"><span class="attr">  field:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">  format:</span> <span class="string">html</span></span><br><span class="line"><span class="attr">  limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<ul>
<li>path - 文件路径。默认情况下是 <code>search.xml</code>。如果文件扩展名为 <code>.json</code>，则输出格式为 JSON。否则将导出 XML 格式文件。</li>
<li>field - 要搜索的搜索范围，可选项:
<ul>
<li>post (Default) - 仅涵盖您博客的所有文章。</li>
<li>page - 仅涵盖您博客的所有页面。</li>
<li>all - 将涵盖您博客的所有文章和页面。</li>
</ul></li>
<li>format - 页面内容的形式，适用于xml模式，可选项:
<ul>
<li>html (Default) - original html string being minified.</li>
<li>raw - markdown text of each posts or pages.</li>
<li>excerpt - only collect excerpt.</li>
<li>more - act as you think.</li>
</ul></li>
<li>limit - 定义被索引的帖子的最大数量，优先取最新的。</li>
</ul>
<h2 id="编辑-主题配置文件-_config.yml">编辑 <code>主题配置文件</code> _config.yml</h2>
<p>启用 <code>local_search</code> 模块，配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line"><span class="attr">  trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line"><span class="attr">  top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line"><span class="attr">  unescape:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>开启 <code>local_search</code> 后就可以在菜单栏看到搜索选项了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/menu-localsearch.png" alt="menu-localsearch"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/localsearch.png" alt="localsearch"></p>
<h1 id="集成-algolia-search-搜索服务">集成 Algolia Search 搜索服务</h1>
<p>网上很多配置过程都比较老了，现在 Algolia Search 界面已经发生比较大的变化。<a href="https://www.algolia.com/" rel="external nofollow noopener noreferrer" target="_blank">Algolia 官网</a></p>
<p>参考 <a href="http://theme-next.iissnan.com/third-party-services.html#algolia-search" rel="external nofollow noopener noreferrer" target="_blank">http://theme-next.iissnan.com/third-party-services.html#algolia-search</a></p>
<h2 id="登录-algolia">登录 algolia</h2>
<p>点击 <a href="https://www.algolia.com/users/sign_in" rel="external nofollow noopener noreferrer" target="_blank">https://www.algolia.com/users/sign_in</a> 进入登录页面，注册一个新账户，或者直接使用 Github 账号 或 Google 账号直接登录。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-login.png" alt="algolia-login"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-about-you.png" alt="algolia-about-you"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-datacenter.png" alt="algolia-datacenter"></p>
<p>跳过创建 Project , 然后进入 Dashboard</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-dashboard.png" alt="algolia-dashboard"></p>
<p>可以直接跳过教学，也可以选择开始教学</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-tutorial.png" alt="algolia-tutorial"></p>
<h2 id="创建一个新的-index">创建一个新的 Index</h2>
<p>没有任何 Index 时：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-create-index-1.png" alt="algolia-create-index-1"></p>
<p>如果已经有一个 Index 时：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-create-index-2.png" alt="algolia-create-index-2"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-index-name.png" alt="algolia-index-name"></p>
<h2 id="设置用于搜索-index-的-api-keys">设置用于搜索 Index 的 API Keys</h2>
<p><strong>这里说明一下，最好使用两个 API Key，其中一个 Key 只有 search 权限，而另一个 Key 具有 Indices 的 CRUD 权限。</strong></p>
<p>默认会有一把名为 <code>Search-Only API Key</code> 的 Key，这个 Key 只有 search 权限，点击 <code>All API Keys</code>:</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-search-only-key.png" alt="algolia-search-only-key"></p>
<p>编辑 <code>Search-only API Key</code>:</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-edit-search-key.png" alt="algolia-edit-search-key"></p>
<p>在 Indices 中添加刚才新创建的 Index 然后 Update 保存:</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-select-index.png" alt="algolia-select-index"></p>
<h2 id="新建一个用于管理-index-的-api-key">新建一个用于管理 Index 的 API Key</h2>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-api-key.png" alt="algolia-new-api-key"></p>
<p>Description 随意，Indices 添加上面创建的 Index，ACL 中只选择四种操作 <code>addObject</code>、<code>deleteObject</code>、<code>deleteIndex</code>、<code>listIndexes</code>，其它的默认就行，然后点击Create：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-key-indices.png" alt="algolia-new-key-indices"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-new-key-acl.png" alt="algolia-new-key-acl"></p>
<p>创建完成后：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-keys.png" alt="algolia-keys"></p>
<h2 id="安装插件-1">安装插件</h2>
<p>在站点根目录下安装插件 hexo-algolia</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-algolia</span><br></pre></td></tr></table></figure>
<p>在主题目录下安装插件 theme-next-algolia-instant-search</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd themes/next</span><br><span class="line">git clone https://github.com/theme-next/theme-next-algolia-instant-search source/lib/algolia-instant-search</span><br></pre></td></tr></table></figure>
<h2 id="编辑-站点配置文件-_config.yml-1">编辑 <code>站点配置文件</code> _config.yml</h2>
<p>在文件末尾添加如下配置，更多说明请看 <a href="https://github.com/oncletom/hexo-algolia" rel="external nofollow noopener noreferrer" target="_blank">官方github</a>：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo plugin: hexo-algolia</span></span><br><span class="line"><span class="comment"># https://github.com/oncletom/hexo-algolia</span></span><br><span class="line"><span class="attr">algolia:</span></span><br><span class="line"><span class="attr">  applicationID:</span> <span class="comment"># 你的 Application ID</span></span><br><span class="line"><span class="attr">  apiKey:</span> <span class="comment"># 你的 Search-Only API Key</span></span><br><span class="line"><span class="attr">  indexName:</span> <span class="comment"># 新建的Index的名称，如'dev_PASSAGE'</span></span><br><span class="line"><span class="attr">  chunkSize:</span> <span class="number">5000</span></span><br></pre></td></tr></table></figure>
<p><strong>点击 API keys 选项，可以查看你的 <code>Application ID</code> 和<code>Search-Only API Key</code></strong></p>
<h2 id="编辑-主题配置文件-_config.yml-1">编辑 <code>主题配置文件</code> _config.yml</h2>
<p>启用 <code>algolia_search</code> 模块（不要启用多个搜索服务），修改配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="comment"># See: https://theme-next.org/docs/third-party-services/search-services#Algolia-Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-algolia-instant-search</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  hits:</span></span><br><span class="line"><span class="attr">    per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line"><span class="attr">    hits_empty:</span> <span class="string">"We didn't find any results for the search: $&#123;query&#125;"</span></span><br><span class="line"><span class="attr">    hits_stats:</span> <span class="string">"$&#123;hits&#125; results found in $&#123;time&#125; ms"</span></span><br></pre></td></tr></table></figure>
<h2 id="使用管理的-key-创建页面索引">使用管理的 Key 创建页面索引</h2>
<p>algolia 上还没有网站的索引数据，所以需要先创建。</p>
<p>执行下列命令设置环境变量，（也可以在 <code>~/.bashrc</code> 或 <code>~/.zshrc</code> 文件中 export，这样就不需要每次都手动 export 了），导入用于管理 Index 的 Key，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export HEXO_ALGOLIA_INDEXING_KEY="填入刚才创建的用于管理 Index 的 Key"</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/export-key.png" alt="export-key"></p>
<p>因为这个 Key 有管理 Index 的权限，所以必须用它才能创建或更新页面索引。</p>
<p>执行下列命令，将检索数据上传到 Algolia 网站，它会保存在之前新建的 Index 中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo algolia</span><br></pre></td></tr></table></figure>
<p>例如： <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">╭─wylu@X555LJ ~/WorkSpace/VScode/hexo  ‹dev*› </span><br><span class="line">╰─$ hexo clean</span><br><span class="line">INFO  Deleted database.</span><br><span class="line">INFO  Deleted public folder.</span><br><span class="line">╭─wylu@X555LJ ~/WorkSpace/VScode/hexo  ‹dev*› </span><br><span class="line">╰─$ hexo algolia</span><br><span class="line">INFO  [hexo-algolia] Testing HEXO_ALGOLIA_INDEXING_KEY permissions.</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  [hexo-algolia] 7 records to index (post, page).</span><br><span class="line">INFO  [hexo-algolia] Indexing chunk 1 of 1 (7 records)</span><br><span class="line">INFO  [hexo-algolia] Indexing done.</span><br></pre></td></tr></table></figure></p>
<p>这时在 algolia 网站点击 Indices 就能看到创建的索引数据了。</p>
<p><strong>注意：每次网站更新后，在部署之前都应先更新 algolia 索引数据，如果你使用的是 algolia 搜索服务。另外还需要注意的是，当你删除一篇文章，使用 <code>hexo algolia</code> 更新站点索引时，这个被删除的文章的索引并不会被删除，如果你想去掉这些已经不存在的文章的索引，可以执行 <code>hexo algolia --flush</code> 命令。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/algolia-search.png" alt="algolia-search"></p>
<p>索引结果的链接是站点配置文件中的 <code>url+root+permalink</code>。</p>
<h1 id="让-google-收录-githugpages-站点">让 Google 收录 GithugPages 站点</h1>
<p>参考</p>
<ul>
<li>hoxis 博客 <a href="https://hoxis.github.io/Hexo+Next%20SEO%E4%BC%98%E5%8C%96.html" rel="external nofollow noopener noreferrer" target="_blank">Hexo博客Next主题SEO优化方法</a></li>
<li>张杰钧 博客 <a href="https://zhangjiejun.com/posts/set_hexo_available_in_google/" rel="external nofollow noopener noreferrer" target="_blank">使hexo博客被谷歌检索</a></li>
<li>EvanLi 博客 <a href="https://evanli.github.io/blog/2018/10/25/let-jekyll-github-pages-be-searched-by-google/" rel="external nofollow noopener noreferrer" target="_blank">让Google搜索到用Jekyll搭建在Github Pages上的博客</a></li>
</ul>
<p>通过设置站点地图，可以让搜索引擎获取你的页面信息，这样可以使别人可以搜索到你的博客。</p>
<h2 id="查看是否被收录">查看是否被收录</h2>
<p>首先查看你的博客地址是否已经被Google收录，在Google的搜索栏中搜索：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:https://xxx.github.io</span><br></pre></td></tr></table></figure>
<p>其中 <code>https://xxx.github.io</code> 为你的博客地址，如果结果是 <code>尝试使用 Google Search Console ... 找不到和您查询的“site:xxx.github.io”相符的内容或信息。</code>，则意味着没有被收录。</p>
<h2 id="生成站点地图">生成站点地图</h2>
<p>安装插件 hexo-generator-sitemap，它能自动生成站点地图，在站点根目录下执行下列命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>
<p>编辑 <code>站点配置文件</code>，在文件末尾添加如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo plugin: hexo-generator-sitemap</span></span><br><span class="line"><span class="comment"># https://github.com/hexojs/hexo-generator-sitemap</span></span><br><span class="line"><span class="attr">sitemap:</span> </span><br><span class="line"><span class="attr">    path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure>
<p>更多配置说明详见 <a href="https://github.com/hexojs/hexo-generator-sitemap" rel="external nofollow noopener noreferrer" target="_blank">官方Github</a></p>
<p>配置完成后，执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成静态文件，它会在 public 文件夹下生成 sitemap.xml 文件，这就是生成的站点地图。</p>
<h2 id="添加蜘蛛协议">添加蜘蛛协议</h2>
<p>在站点根目录 source 文件夹下新建 robots.txt 文件，文件内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Allow: /</span><br><span class="line">Allow: /archives/</span><br><span class="line">Allow: /categories/</span><br><span class="line">Allow: /tags/</span><br><span class="line">Disallow: /js/</span><br><span class="line">Disallow: /css/</span><br><span class="line">Disallow: /images/</span><br><span class="line">Disallow: /lib/</span><br><span class="line">Disallow: /assets/</span><br><span class="line"></span><br><span class="line">Sitemap: https://yourname.github.io/sitemap.xml</span><br></pre></td></tr></table></figure>
<p><strong>将 <code>Sitemap</code> 属性值替换成自己的地址, <code>Allow</code> 字段值为允许搜索引擎抓取的文件，<code>Disallow</code>为不需要抓取的内容，可以根据具体情况修改。</strong></p>
<p>例如生成站点的静态文件中有 <code>guestbook</code> 目录，里面有留言板页面，这是需要抓取的，所以在 robots 中添加 <code>Allow: /guestbook/</code>，这样就会抓取 guestbook 文件夹下的所有内容。</p>
<p><strong>这个文件不是必需的，如果没有该文件，Google 默认会抓取站点所有内容。</strong></p>
<h2 id="提交搜索资源">提交搜索资源</h2>
<p>选择 立即使用 <a href="https://search.google.com/search-console/about" rel="external nofollow noopener noreferrer" target="_blank">Google Search Console</a>，需要先登录 Google 账号。</p>
<p><strong>因为我已经添加了 GithubPages 的搜索资源，所以为了方便，这里使用另一个代码托管平台 gitee 的 Pages 的服务，以此为例介绍如何添加搜索资源，对于 GithubPages 操作步骤和方法是一样的，只要把地址对应地换成 <code>https://yourname.github.io</code> 即可。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-add-site-1.png" alt="google-add-site-1"></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-add-site-2.png" alt="google-add-site-2"></p>
<p>根据具体情况输入网址，如 <code>https://xxx.github.io</code>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-site-url.png" alt="google-site-url"></p>
<p>点击继续后，会提示你验证站点的所有权，验证的方法有多种，选择其中一种即可：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-site-verify.png" alt="google-site-verify"></p>
<p><strong>因为 NexT 主题已集成了该验证实现，所以这里推荐使用第二种验证方法，即 <code>HTML 标记</code>。</strong></p>
<p>下面使用 <code>HTML 标记</code> 进行验证：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-verify-html-tag.png" alt="google-verify-html-tag"></p>
<p>编辑 <code>主题配置文件</code>，修改 <code>google_site_verification</code> 配置，复制粘贴上面 content 中的验证码，配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Google Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters</span></span><br><span class="line"><span class="attr">google_site_verification:</span> <span class="string">hn30FFDlMIuK4H41vDD2EWny80OZIx8kMDYZiXrFFjg</span></span><br></pre></td></tr></table></figure>
<p><strong>重新生成站点并部署成功后，你会看到主页的源代码中会包含有该验证码的 HTML tag，如下：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-index-html-tag.png" alt="google-index-html-tag"></p>
<p>回到验证所有权的页面，点击验证，验证成功后会有如下提示：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-finish-site-verify.png" alt="google-finish-site-verify"></p>
<p>点击前往资源页面，然后添加站点地图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-submit-sitemap.png" alt="google-submit-sitemap"></p>
<p>提交后：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/google-submit-sitemap-success.png" alt="google-submit-sitemap-success"></p>
<p>等待一段时间后（可能需要一两天），就可以使用 Google 搜索到博客了。</p>
<h1 id="配置-travis-ci-持续集成">配置 Travis CI 持续集成</h1>
<p>参考</p>
<ul>
<li><p>zhujian hexo指南 <a href="https://hexo-guide.readthedocs.io/zh_CN/latest/third-service/%5BTravis%20CI%5D%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90.html" rel="external nofollow noopener noreferrer" target="_blank">[Travis CI]持续集成</a></p></li>
<li><p>隔壁老杨 知乎 <a href="https://zhuanlan.zhihu.com/p/37014376" rel="external nofollow noopener noreferrer" target="_blank">使用 Travis CI 部署你的 Hexo 博客</a></p></li>
<li><p>KChen 博客 <a href="https://kchen.cc/2016/11/12/hexo-instructions/#Travis-CI-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90" rel="external nofollow noopener noreferrer" target="_blank">基于 Hexo 的全自动博客构建部署系统</a></p></li>
</ul>
<p>现假设你的项目已有两个分支，一个为 dev 分支，用于更新站点，如添加、修改、删除文章等；一个为 master 分支，用于部署站点。</p>
<p>Travis CI 是一个深度结合 github 的持续集成服务。使用它我们不需要手动部署站点，即不需要手动 push 生成的 public 文件夹的内容到 master 分支。<strong>配置了 Travis CI 后，每当我们提交 dev 分支下的修改后，Travis CI 就会根据配置文件生成虚拟机，配置环境后进行静态文件的生成和部署。</strong></p>
<p>配置过程主要分为三个部分：</p>
<h2 id="配置-travis-ci">配置 Travis CI</h2>
<p>Travis CI 不需要单独注册，进入 <a href="https://travis-ci.org/" rel="external nofollow noopener noreferrer" target="_blank">Travis CI 官网</a> 后，直接使用 GitHub 账号登录即可。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-setting.png" alt="travis-ci-setting"></p>
<p>登录后，勾选要集成的仓库，默认是没有勾选的：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-select-repo.png" alt="travis-ci-select-repo"></p>
<p>如果没有看到自己的项目，先点击左上角 <code>Sync account</code> 同步一下。勾选后，点击该仓库进入工作页面。</p>
<p>选择右上角的 <code>More options -&gt; Settings</code> 进入设置页面：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-repo-settings.png" alt="travis-ci-repo-settings"></p>
<h2 id="设置环境变量">设置环境变量</h2>
<p>有三个环境变量是需要设置的，用于赋予 Travis CI 操作我们的仓库的权限：</p>
<ul>
<li><code>GITHUB_REPO_TOKEN</code>: 操作 Github 仓库的 personal access token</li>
<li><code>USER_EMAIL</code>: 你的 Github 账号的邮箱</li>
<li><code>USER_NAME</code>： 你的 Github 账号的用户名</li>
</ul>
<p>如果你使用了 Algolia Search 服务，那么还需要设置一个变量：</p>
<ul>
<li><code>HEXO_ALGOLIA_INDEXING_KEY</code>: 管理 algolia Index 的 key</li>
</ul>
<p>这里的 HEXO_ALGOLIA_INDEXING_KEY 与上面集成 aloglia search 是一致的。</p>
<p><code>USER_EMAIL</code>，<code>USER_NAME</code>，<code>HEXO_ALGOLIA_INDEXING_KEY</code> 我们都已经有了，现在需要生成一个 Github 仓库的 token，参考 <a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line" rel="external nofollow noopener noreferrer" target="_blank">Creating a personal access token for the command line</a>。</p>
<p>登录 Github，点击 <code>头像-&gt;Settings-&gt;Developer settings-&gt;Personal access tokens-&gt;Generate new token</code>，新生成一个 token， token 名称随意填写，给这个 token 赋予下图中的权限，可以根据需要自行调整：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/personal-access-token.png" alt="personal-access-token"></p>
<p>然后点击 Generate token，生成的 token 只显示一次，页面刷新后将无法看到，需要先复制下来（如果忘记了，可以重新生成）,这个值就是 <code>GITHUB_REPO_TOKEN</code> 变量的值。</p>
<p>有了 <code>GITHUB_REPO_TOKEN</code> 变量的值后就可开始设置环境变量了，设置环境变量有多种方法，可以参考官方文档 <a href="https://docs.travis-ci.com/user/environment-variables/" rel="external nofollow noopener noreferrer" target="_blank">Environment Variables</a>，这里使用的是其中的 <a href="https://docs.travis-ci.com/user/environment-variables/#defining-variables-in-repository-settings" rel="external nofollow noopener noreferrer" target="_blank">Defining Variables in Repository Settings</a> 方法。</p>
<p>回到刚才 Travis CI 的设置页面，在 Environment Variables 一栏中进行添加环境变量操作。如下图，分别填入四个变量名和对应变量值并点击 Add 进行添加，如果勾选了 <code>Display value in build log</code>，那么在构建日志中就能看到变量值的明文（如果你不用 Algolia Search，则不需要 HEXO_ALGOLIA_INDEXING_KEY）：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-env-var.png" alt="travis-ci-env-var"></p>
<h2 id="添加-.travis.yml-文件">添加 .travis.yml 文件</h2>
<p>在站点根目录下新建 <code>.travis.yml</code> 文件，当包含该文件的项目上传到 Github 时，Travis CI 自动根据该配置文件中的内容进行构建和部署。</p>
<p>该配置文件指导 Travis CI 操作的内容类似于，我们在一台全新的机器上 clone 这个项目后，配置环境依赖，然后生成并部署站点的操作，它包含了这一系列操作所执行的命令，所以不同项目 <code>.travis.yml</code> 文件的内容是不同的，下面是 <a href="https://github.com/wylu/wylu.github.io/blob/dev/.travis.yml" rel="external nofollow noopener noreferrer" target="_blank">我的配置</a> ，仅供参考：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 虚拟机操作系统，xenial 是 Ubuntu 16.04</span></span><br><span class="line"><span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line"></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span> <span class="comment"># 构建环境</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"10.15.3"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置只检测 dev 分支的 push 操作</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">dev</span> <span class="comment"># 只有 dev 分支提交时才运行 Travis CI</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cache these folders</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line"><span class="attr">  directories:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">node_modules</span> <span class="comment"># 把 node_modules 放入缓存可以节约构建的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Start: Build Lifecycle</span></span><br><span class="line"><span class="attr">before_install:</span> <span class="comment"># 配置环境</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span> <span class="bullet">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"></span><br><span class="line"><span class="attr">install:</span> <span class="comment"># 安装依赖</span></span><br><span class="line">  <span class="comment"># install the plugins in package.json</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="comment"># it will auto export after setting environment variables from repository settings</span></span><br><span class="line">  <span class="comment">#- export HEXO_ALGOLIA_INDEXING_KEY="$&#123;HEXO_ALGOLIA_INDEXING_KEY&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">pwd</span> <span class="comment"># 查看当前工作目录</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="comment"># --flush option used to remove invalid indexes or update some indexes</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">algolia</span> <span class="bullet">--flush</span> <span class="comment"># 更新 algolia search 索引</span></span><br><span class="line">  <span class="comment"># this operation is not required as it will be done by "hexo deploy"</span></span><br><span class="line">  <span class="comment">#- hexo generate</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">$USER_NAME</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">$USER_EMAIL</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">sed</span> <span class="bullet">-i''</span> <span class="string">"s~git@github.com:yourname/yourname.github.io.git~https://$&#123;GITHUB_REPO_TOKEN&#125;@github.com/yourname/yourname.github.io.git~"</span> <span class="string">_config.yml</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br><span class="line"><span class="comment"># End: Build Lifecycle</span></span><br></pre></td></tr></table></figure>
<p>上面的配置需要根据具体情况修改，如：</p>
<ul>
<li>如果你的源码分支名不是 <code>dev</code>，那么 <code>only:</code> 下的分支名就要改成你相应的分支名。</li>
<li>如果你没有使用 Algolia Search 服务，那么就不需要执行 <code>hexo algolia --flush</code>。</li>
</ul>
<p>最后的 <code>after_success：</code> 中，使用到了我们设置的环境变量的值 <code>USER_NAME</code>、<code>USER_EMAIL</code> 和 <code>GITHUB_REPO_TOKEN</code>。sed 命令将 hexo 的 <code>站点配置文件</code> 中的部署仓库的链接替换成了 access_token 形式，其中前面的 <code>git@github.com:yourname/yourname.github.io.git</code> 是你在 <code>站点配置文件</code> 中的链接，后面的 <code>https://${GITHUB_REPO_TOKEN}@github.com/yourname/yourname.github.io.git</code> 是 token 形式的链接。</p>
<p><strong>注意：如果你也是部署到 GithubPages，需要将上面全部的 <code>yourname</code> 换成你的 github 用户名。</strong></p>
<p><strong>在 dev 分支下配置完成后，git 提交修改。</strong></p>
<p>如果配置 Travis CI 成功，它会检测到 dev 分支的提交，然后根据 <code>.travis.yml</code> 开始执行构建任务，构建任务完成时，查看构建日志，<strong>如果站点静态文件的生成与部署都没有报错</strong> ，而且构建任务的完成状态是绿色的 <code>passed</code> 的话，可以判定构建任务成功。</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-passed.png" alt="travis-ci-build-passed"></p>
<p>构建过程中的部分日志：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-log.png" alt="travis-ci-build-log"></p>
<p><strong>需要注意 <code>hexo deploy</code> 是否真正成功，有时没执行成功，例如最后的 push 失败了，但是构建任务的状态还是绿色的 <code>passed</code>，如：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-push-fail.png" alt="travis-ci-push-fail"></p>
<p>虽然上面的也是 <code>passed</code>，但是却没有成功部署静态页面，下面是成功 push 时打印的日志：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-push-success.png" alt="travis-ci-push-success"></p>
<p>构建历史：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-history.png" alt="travis-ci-build-history"></p>
<h2 id="给项目添加持续集成徽章">给项目添加持续集成徽章</h2>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-dev.png" alt="travis-ci-dev"></p>
<p>参考 <a href="https://docs.travis-ci.com/user/status-images/" rel="external nofollow noopener noreferrer" target="_blank">Embedding Status Images</a>，点击上图中右上角的徽章，会弹出一个编辑框，然后选择分支和格式，就会生成对应的链接，将其复制到站点根目录下的 README.md 文件中，推送后效果如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/wylu/cdn/wylu/source/_posts/Tool/Hexo/NexT第三方服务集成/travis-ci-build-passing.png" alt="travis-ci-build-passing"></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>lu wenye
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://wylu.me/posts/aa960b18/" title="NexT第三方服务集成">https://wylu.me/posts/aa960b18/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Hexo/" rel="tag"> <i class="fa fa-tag"></i> Hexo</a>
              <a href="/tags/NexT/" rel="tag"> <i class="fa fa-tag"></i> NexT</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/e0424f3f/" rel="prev" title="NexT主题进阶配置">
      <i class="fa fa-chevron-left"></i> NexT主题进阶配置
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/78c745f0/" rel="next" title="Hexo相关问题和优化">
      Hexo相关问题和优化 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#环境及版本声明"><span class="nav-number">1.</span> <span class="nav-text">环境及版本声明</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#集成-gitalk-评论系统"><span class="nav-number">2.</span> <span class="nav-text">集成 Gitalk 评论系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#注册-oauth-app"><span class="nav-number">2.1.</span> <span class="nav-text">注册 OAuth App</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改主题-_config.yml-配置"><span class="nav-number">2.2.</span> <span class="nav-text">修改主题 _config.yml 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化评论"><span class="nav-number">2.3.</span> <span class="nav-text">初始化评论</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#取消一些页面的评论"><span class="nav-number">2.4.</span> <span class="nav-text">取消一些页面的评论</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建留言板"><span class="nav-number">3.</span> <span class="nav-text">创建留言板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#新建-guestbook-页面"><span class="nav-number">3.1.</span> <span class="nav-text">新建 guestbook 页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加菜单项"><span class="nav-number">3.2.</span> <span class="nav-text">添加菜单项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置菜单项显示文本"><span class="nav-number">3.3.</span> <span class="nav-text">设置菜单项显示文本</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#不蒜子访客数和访问量统计"><span class="nav-number">4.</span> <span class="nav-text">不蒜子访客数和访问量统计</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用-localsearch-搜索功能"><span class="nav-number">5.</span> <span class="nav-text">使用 LocalSearch 搜索功能</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装插件"><span class="nav-number">5.1.</span> <span class="nav-text">安装插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-站点配置文件-_config.yml"><span class="nav-number">5.2.</span> <span class="nav-text">编辑 站点配置文件 _config.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-主题配置文件-_config.yml"><span class="nav-number">5.3.</span> <span class="nav-text">编辑 主题配置文件 _config.yml</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#集成-algolia-search-搜索服务"><span class="nav-number">6.</span> <span class="nav-text">集成 Algolia Search 搜索服务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#登录-algolia"><span class="nav-number">6.1.</span> <span class="nav-text">登录 algolia</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建一个新的-index"><span class="nav-number">6.2.</span> <span class="nav-text">创建一个新的 Index</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置用于搜索-index-的-api-keys"><span class="nav-number">6.3.</span> <span class="nav-text">设置用于搜索 Index 的 API Keys</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新建一个用于管理-index-的-api-key"><span class="nav-number">6.4.</span> <span class="nav-text">新建一个用于管理 Index 的 API Key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装插件-1"><span class="nav-number">6.5.</span> <span class="nav-text">安装插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-站点配置文件-_config.yml-1"><span class="nav-number">6.6.</span> <span class="nav-text">编辑 站点配置文件 _config.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-主题配置文件-_config.yml-1"><span class="nav-number">6.7.</span> <span class="nav-text">编辑 主题配置文件 _config.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用管理的-key-创建页面索引"><span class="nav-number">6.8.</span> <span class="nav-text">使用管理的 Key 创建页面索引</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#让-google-收录-githugpages-站点"><span class="nav-number">7.</span> <span class="nav-text">让 Google 收录 GithugPages 站点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看是否被收录"><span class="nav-number">7.1.</span> <span class="nav-text">查看是否被收录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成站点地图"><span class="nav-number">7.2.</span> <span class="nav-text">生成站点地图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加蜘蛛协议"><span class="nav-number">7.3.</span> <span class="nav-text">添加蜘蛛协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交搜索资源"><span class="nav-number">7.4.</span> <span class="nav-text">提交搜索资源</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置-travis-ci-持续集成"><span class="nav-number">8.</span> <span class="nav-text">配置 Travis CI 持续集成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置-travis-ci"><span class="nav-number">8.1.</span> <span class="nav-text">配置 Travis CI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置环境变量"><span class="nav-number">8.2.</span> <span class="nav-text">设置环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加-.travis.yml-文件"><span class="nav-number">8.3.</span> <span class="nav-text">添加 .travis.yml 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#给项目添加持续集成徽章"><span class="nav-number">8.4.</span> <span class="nav-text">给项目添加持续集成徽章</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lu wenye" src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">lu wenye</p>
  <div class="site-description" itemprop="description">Hard work, Dedication and Discipline</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wylu" title="GitHub → https://github.com/wylu" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wylu@gmail.com" title="E-Mail → mailto:wylu@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_32767041" title="CSDN → https://blog.csdn.net/qq_32767041" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-book"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-fw fa-rss"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wylu</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">137k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:05</span>
</div>
  <div id="site-runtime">
  <span class="post-meta-item-icon">
    <i class="fa fa-clock-o"></i>
  </span>
  <span id="runtime"></span>
</div>
<script language="javascript">
  function isPC() {
    var userAgentInfo = navigator.userAgent;
    var agents = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
    for (var i = 0; i < agents.length; i++) {
      if (userAgentInfo.indexOf(agents[i]) > 0) {
        return false;
      }
    }
    return true;
  }

  function siteTime(openOnPC, start) {
    window.setTimeout("siteTime(openOnPC, start)", 1000);
    var seconds = 1000;
    var minutes = seconds * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;

    
      start = new Date("2019-03-05 12:00:00 +0800");
    
    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1;
    var date = now.getDate();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    var diff = now - start;

    var diffYears = Math.floor(diff / years);
    var diffDays = Math.floor((diff / days) - diffYears * 365);
    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);

    if (openOnPC) {
      document.getElementById("runtime").innerHTML = "Running: " + diffYears + " years " + diffDays + " days " + diffHours + " hours " + diffMinutes + " mins " + diffSeconds + " secs";
    } else {
      document.getElementById("runtime").innerHTML = "Running: " + diffYears + "y " + diffDays + "d " + diffHours + "h " + diffMinutes + "m " + diffSeconds + "s";
    }
  }

  var showOnMobile = false;
  var openOnPC = isPC();
  var start = new Date();
  siteTime(openOnPC, start);

  if (!openOnPC && !showOnMobile) {
    document.getElementById('site-runtime').style.display = 'none';
  }
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js"></script><script src="/js/algolia-search.js"></script>













  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '92a1d1033665c3257f75',
      clientSecret: '7eaeed4bc3219d196e82e3345f460aba030d4eec',
      repo: 'github-pages-comments',
      owner: 'wylu',
      admin: ['wylu'],
      id: '6021f25ba2dfc193dea0d27cb863adba',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
